<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Checkout — Compass AI Flow</title>
  <link rel="stylesheet" href="assets/styles.css"/>
  <style>
    .checkout .summary{display:grid;gap:10px;margin:12px 0}
    .line{display:flex;justify-content:space-between;padding:10px 12px;border:1px solid rgba(255,255,255,.1);border-radius:12px;background:rgba(255,255,255,.04)}
    .paybox{display:grid;gap:10px;margin-top:12px}
    .btn.wide{width:100%}
  </style>
</head>
<body>
  <div class="header"><div class="header-inner">
    <a class="btn" href="assistant-store.html">← Вернуться в магазин</a>
    <div class="logo"><img src="assets/logo.svg" alt="Compass AI Flow"/></div>
  </div></div>

  <div class="container checkout">
    <div class="section">
      <h2>Оплата</h2>
      <div id="list" class="summary"></div>
      <div class="line"><span>Итого</span><strong id="total">$0</strong></div>

      <label class="field" style="margin-top:10px">
        <span>Email для доступа:</span>
        <input id="email" type="email" placeholder="you@email.com" required>
      </label>

      <div class="paybox">
        <button class="btn wide" disabled> Apple Pay (скоро)</button>
        <button class="btn wide" disabled>G Pay (скоро)</button>
        <button class="btn wide" disabled>PayPal (скоро)</button>
        <button class="btn primary wide" id="demo">Оплатить (демо)</button>
      </div>

      <div class="tiny muted">Демо-режим, списания нет. Позже подключим Stripe Checkout с Apple Pay/Google Pay/PayPal.</div>
    </div>
  </div>

  <script>
  (function(){
    const KEY='caf_cart_v1';
    const items = JSON.parse(localStorage.getItem(KEY)||'[]');
    const list = document.getElementById('list');
    const totalEl = document.getElementById('total');
    if(items.length===0){ list.innerHTML='<div class="muted">Корзина пуста</div>'; }
    else{
      list.innerHTML = items.map(i=>`
        <div class="line"><span>${i.title} × ${i.qty}</span><strong>$${(i.price*i.qty).toFixed(2)}</strong></div>
      `).join('');
    }
    const total = items.reduce((s,i)=>s+i.price*i.qty,0);
    totalEl.textContent = '$'+total.toFixed(2);

    document.getElementById('demo').addEventListener('click', ()=>{
      const email = document.getElementById('email').value.trim();
      if(!email){ alert('Укажи email для доступа.'); return; }
      alert('Спасибо! (демо) Доступ придёт на '+email);
      localStorage.setItem(KEY,'[]');
      location.href='assistant-store.html';
    });
  })();
  </script>
</body>
</html>
